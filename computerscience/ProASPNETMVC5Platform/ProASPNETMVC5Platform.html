<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Pro ASP.NET MVC5 Platform</title>
    <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css" type="text/css">
    <script src="http://code.jquery.com/jquery-latest.js" type="text/javascript"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/js/bootstrap.min.js" type="text/javascript"></script>
    <style type="text/css">
        #floatMenu {
            font: 11px "Comic Sans Ms";
        }
            table {
                font: 13px "Comic Sans Ms";
            }
            table.th {
                text-align: center;
            }

        .backtop {
            background: url(../images/BackTop02.jpg) no-repeat center center;
            bottom: 20px;
            cursor: pointer;
            display: none;
            height: 70px;
            position: fixed;
            right: 20px;
            text-indent: -9999px;
            width: 70px;
            z-index: 100;
        }

        h3{

        }
    </style>
</head>
<body class="container-fluid">
    <h2 class="text-center hidden-xs">Adam Freeman - Pro ASP.NET MVC 5 Platform</h2>
    <h3 class="text-center visible-xs">Pro ASP.NET</h3>
    <h3 class="text-center visible-xs">MVC 5 Platform</h3>
    <div class="container col-lg-2 hidden-xs hidden-sm" id="floatMenu">
        <ul class="nav nav-pills nav-stacked">
            Part 1: Getting Things Ready
            <li>
                <a href="#chapter01title">Putting ASP.NET Platform in Context</a>
            </li>
            <li>
                <a href="#chapter02title">Pattern and Tools Primers</a>
            </li>
            <li>
                <a href="#chapter03title"> The ASP.NET Life Cycles</a>
            </li>

            Part 2: The ASP.NET Platform Foundation
            <li>
                <a href="#chapter04title"> Modules </a>
            </li>
            <li>
                <a href="#chapter05title">Handlers</a>
            </li>
            <li>
                <a href="#chapter06title">Disrupting the Request Life Cycle</a>
            </li>
            <li>
                <a href="#chapter07title">Detecting Device Capabilities</a>
            </li>
            <li>
                <a href="#chapter08title">Tracing Requests</a>
            </li>

            Part 3: The ASP.NET Platform Services
            <li>
                <a href="#chapter09title">Configuration</a>
            </li>
            <li>
                <a href="#chapter10title">State Data</a>
            </li>
            <li>
                <a href="chapter11title">Caching Data</a>
            </li>
            <li>
                <a href="chapter12title">Caching Content</a>
            </li>
            <li>
                <a href="chapter13title">Getting Started with Identity</a>
            </li>
            <li>
                <a href="chapter14title">Advanced ASP.NET Identity</a>
            </li>
        </ul>
    </div>

    <!-- Search input box. Yet 2b done: float, keyword searching including the toggled content -->


    <div class="container col-lg-10 col-xs-12">
        <div style="padding: 100px 100px 10px;">
            <form class="bs-example bs-exmple-form" role="form">
                <div class="row">
                    <div class="input-group">
                        <span class="input-group-btn">
                            <button class="btn btn-default" type="button">Search</button>
                        </span>
                        <input type="text" class="form-control" />
                    </div>
                </div>
            </form>
        </div>
        <h3 id="chapter03title">Chapter 03,  the ASP.NET Life Cycles</h3>
        <div class="panel panel-primary">
            <div class="panel-heading">Application Life Cycle</div>
            <div class="panel-body">
                <p>
                    Application life cycle tracks the life of a web application from the moment it starts to
                    the moment it is terminated.
                </p>
                <!--<img src="ProASPNETMVC5Platform/Chapter03/Figure03-01TheApplicationLifeCycle.jpg" alt="TheApplicationLifeCycle" />-->
            </div>
        </div>
        <div class="panel panel-primary">
            <div class="panel-heading">Request Life Cycle</div>
            <div class="panel-body">
                <p>
                    Request life cycle defines the path that an HTTP request follows as it moves
                    through the ASP.NET platform from the point at which the initial request is
                    received until the response is sent.
                </p>
                <!--<img src="~/door/computerscience/ProASPNETMVC5Platform/Chapter03/Figure03-05AddingtheRequestHandlingProcesstotheLifeCycleDiagram.jpg" alt="TheRequestLifeCycle" />-->
                <table class="table table-condensed table-striped">
                    <caption>Table 03-05. The Request Life Cycle Events Defined by the Global Application Class</caption>
                    <tr>
                        <th>
                            Name
                        </th>
                        <th>
                            Description
                        </th>
                    </tr>
                    <tr>
                        <td>
                            BeginRequest
                        </td>
                        <td>
                            This is triggered as the first event when a new request is received.
                        </td>
                    </tr>
                    <tr>
                        <td>AuthenticateRequest <br /> PostAuthenticateRequest</td>
                        <td>
                            The <b>AuthenticateRequest</b> event is triggered to identify the user
                            who has made the request. <br /> When all of the event handlers have been processed,
                            <b>PostAuthenticateRequest</b> is triggered.
                        </td>
                    </tr>
                    <tr>
                        <td>AuthorizeRequest</td>
                        <td>
                            <b>AuthorizeRequest</b> is triggered to authorize the request. When all of the
                            event handlers have been processed, <b>PostAuthorizeRequest</b> is triggered.
                        </td>
                    </tr>
                    <tr>
                        <td>ResolveRequestCache<br />PostResolveRequestCache</td>
                        <td>
                            <b>ResolveRequestCache</b> is triggered to resolve the request from cached data.
                            I describe the caching features in <a href="#chapter11title">Chapters 11 </a> <a href="#chapter12title"> 12</a>. When the event handlers
                            have been processed, <b>PostResolveRequestCache</b> is triggered.
                        </td>
                    </tr>
                    <tr>
                        <td>MapRequestHandler<br />PostMapRequestHandler</td>
                        <td>
                            <b>MapRequestHandler</b> is triggered when the ASP.NET framework wants to be locate a handler
                            for the request. I introduce handlers later in this chapter and cover them in depth in <a href="#chapter05title">Chapter 5</a>.
                            The <b>PostMapRequestHandler</b> event is triggered once the handler has been selected.
                        </td>
                    </tr>
                    <tr>
                        <td>AcquireRequestState <br /> PostAcquireRequestState</td>
                        <td>
                            <b>AcquireRequestState</b> is triggered to obtain the state data associated with the
                            request (such as session state). When all of the event handlers are processed, <b>PostAcquireRequestState</b>
                            is triggered. I explain the different kinds of state data in <a href="#chapter10title">Chapter 10</a>.
                        </td>
                    </tr>
                    <tr>
                        <td>PreRequestHandlerExecute<br />PostRequestHandlerExecute</td>
                        <td>
                            These events are triggered immediately before and immediately after the handler is asked to process the request.
                        </td>
                    </tr>
                    <tr>
                        <td>ReleaseRequestState<br />PostReleaseRequestState</td>
                        <td>
                            <b>ReleaseRequestState</b> is triggered when the state data associated with the request is no longer
                            required for request processing. When the event handlers have been processed, the <b>PostReleaseRequestState</b>
                            event is triggered.
                        </td>
                    </tr>
                    <tr>
                        <td>
                            UpdateRequestCache
                        </td>
                        <td>
                            This event is triggered so that modules responsible for caching can update their state. I introduce the role of modules
                            later in this chapter and describe them in depth in <a href="#chapter04title">Chapter 04</a>. I describe the built-in
                            support for caching in <a href="#chapter11title">Chapter11</a> and <a href="#chapter12title">12</a>.
                        </td>
                    </tr>
                    <tr>
                        <td>
                            LogRequest<br />PostLogRequest
                        </td>
                        <td>
                            This event is triggered to provide an opportunity for details of the request to be logged.
                            When all of the event handlers have been processed, <b>PostLogRequest</b> is triggered.
                        </td>
                    </tr>
                    <tr>
                        <td>EndRequest</td>
                        <td>
                            This event is triggered when the request has been processed and the response is
                            ready to be sent to the browser.
                        </td>
                    </tr>
                    <tr>
                        <td>PreSendRequestHeaders</td>
                        <td>
                            This event is triggered just before the HTTP headers are sent to the browser.
                        </td>
                    </tr>
                    <tr>
                        <td>PreSendRequestContent</td>
                        <td>
                            This event is triggered after the headers have been sent but before the content is sent to the browser.
                        </td>
                    </tr>
                    <tr>
                        <td>
                            Error
                        </td>
                        <td>
                            This event is triggered when an error is encountered; this can happen at any point in the request process.
                            See <a href="#chapter06title">Chapter 06</a> for details about error handling.
                        </td>
                    </tr>
                </table>
                <label>Notes: </label>
                <p>One can handle these events in the global application class, in a module, or in a handler.</p>
                <p>Modules: self-contained classes that receive the life-cycle events and can monitor and manipulate requests. </p>
                <p>
                    Handlers: responsible for generating a response for a request, and for locating a controller and
                    action method to service a request and rendering the view that the action method specifies. <br />
                    The ASP.NET framework supports multiple handlers, which is why it is possible to mix and match development frameworks such as MVC, Web
                    API, and Web Forms within the same application. The handler is linked to four of the request life-cycle events. The
                    <b>MapRequestHandler</b> and <b>PostMapRequestHandler</b> events are triggered before and after a handler is selected for the
                    request, and the <b>PreRequestHandlerExecute</b> and <b>PostRequestHandlerExecute</b> events are triggered before and after
                    the handler is asked to generate a response for the request.
                </p>
            </div>
        </div>

        <div class="panel panel-primary">
            <div class="panel-heading">Understanding the ASP.NET Context Objects</div>
            <div class="panel-body">
                <table class="table table-primary table-striped">
                    <caption>Table 03-09. The Most Commonly Used HttpContext Members</caption>
                    <tr>
                        <th>
                            Name
                        </th>
                        <th>
                            Description
                        </th>
                    </tr>
                    <tr>
                        <td>
                            Application
                        </td>
                        <td>
                            Returns the <b>HttpApplicationState</b> object used to manage application state data.
                            See <a href="#chapter10title">Chapter 10</a>.
                        </td>
                    </tr>
                    <tr>
                        <td>
                            ApplicationInstance
                        </td>
                        <td>
                            Returns the <b>HttpApplication</b> object associated with the current request
                        </td>
                    </tr>
                    <tr>
                        <td>Cache</td>
                        <td>
                            Returns a <b>Cache</b> object used to cache data. See <a href="#chapter11title">Chapter 11</a> for details.
                        </td>
                    </tr>
                    <tr>
                        <td>Current</td>
                        <td>(Static.) Returns the <b>HttpContext</b> object for the current request.</td>
                    </tr>
                    <tr>
                        <td>CurrentHandler</td>
                        <td>
                            Returns the <b>IHttpHandler</b> instance that will generate content for the request.
                            See <a href="#chapter05title">Chapter 05</a> for details of handlers and <a href="#chapter06title">Chapter 06</a>
                            for information about how to preempt the handler selection process used by the ASP.NET platform.
                        </td>
                    </tr>
                    <tr>
                        <td>
                            IsDebuggingEnabled
                        </td>
                        <td>
                            Returns <i>true</i> if the debugger is attached to the ASP.NET application. You can use this to
                            perform debug-specific activities, but if you do, take care to test throughly without the debugger
                            before deployment.
                        </td>
                    </tr>
                    <tr>
                        <td>
                            Items
                        </td>
                        <td>
                            Returns a collection that can be used to pass state data between ASP.NET framework
                            components that participate in processing a request.
                        </td>
                    </tr>
                    <tr>
                        <td>
                            GetSection(name)
                        </td>
                        <td>
                            Gets the specified configuration section from the <em>Web.config</em> file. I show you
                            how to work with the <em>Web.config</em> files in <a href="#chapter09title">Chapter 09</a>.
                        </td>
                    </tr>
                    <tr>
                        <td>
                            Request
                        </td>
                        <td>
                            Returns an <a href="#httprequestclasstable"><b>HttpRequest</b></a> object that provides details of request being processed.
                        </td>
                    </tr>
                    <tr>
                        <td>
                            Response
                        </td>
                        <td>
                            Returns an <a href="#httpresponsetable"><b>HttpResponse</b></a> object that provides details of the response that is being
                            constructed and that will be sent to the browser.
                        </td>
                    </tr>
                    <tr>
                        <td>Session</td>
                        <td>
                            Returns an <b>HttpSession</b> object state object that provides access to the session state.
                            This property will return null until the <b>PostAcquireRequestState</b> application event has
                            been triggered. See <a href="#chapter10title">Chapter 10</a> for details.
                        </td>
                    </tr>
                    <tr>
                        <td>
                            Server
                        </td>
                        <td>
                            Returns an <b>HttpServerUtility</b> object that can contain utility functions, the most
                            useful being the ability to control request handler execution (see <a href="#chapter06title">Chapter 06</a>).
                        </td>
                    </tr>
                    <tr>
                        <td>
                            Timestamp
                        </td>
                        <td>
                            Returns a <b>DateTime</b> object that contains the time at which the <b>HttpContext</b> object was created.
                        </td>
                    </tr>
                    <tr>
                        <td>Trace</td>
                        <td>
                            Used to record diagnostic information. See <a href="#chapter08title">Chapter 08</a>.
                        </td>
                    </tr>
                </table>

                <table class="table table-condensed table-striped">
                    <caption>Table 03-10. Obtaining an <b>HttpContext</b> in Different ASP.NET/MVC components</caption>
                    <tr>
                        <th>
                            Component
                        </th>
                        <th>
                            Technique
                        </th>
                    </tr>
                    <tr>
                        <td>Controller</td>
                        <td>
                            Use the <b>HttpContext</b> property defined by <b>Controller</b>, which is the
                            base class for MVC framework controllers.
                        </td>
                    </tr>
                    <tr>
                        <td>
                            View
                        </td>
                        <td>
                            Use the <b>Context</b> property defined by <b>WebViewPage</b>, which is the base
                            class used to compile Razor views.
                        </td>
                    </tr>
                    <tr>
                        <td>Global Application Class</td>
                        <td>
                            Use the <b>Content</b> convenience property defined by the <b>HttpApplication</b> class.
                            (which is the base for the global application class).
                        </td>
                    </tr>
                    <tr>
                        <td>
                            Module
                        </td>
                        <td>
                            The <b>Init</b> method is passed an <b>HttpContext</b> object when it is invoked, and
                            the life-cycle event handlers are passed an <b>HttpApplication</b> object, which defined
                            a <b>Context</b> property. See <a href="chapter04title">Chapter 04</a> for details of modules.
                        </td>
                    </tr>
                    <tr>
                        <td>
                            Handler
                        </td>
                        <td>
                            The <b>ProcessRequest</b> method is passed as <b>HttpContext</b> object when it is invoked.
                            See <a href="#chapter05title">Chapter 05</a> for details of handlers.
                        </td>
                    </tr>
                    <tr>
                        <td>
                            Universally
                        </td>
                        <td>
                            You can always get the <b>HttpContext</b> object associated with the current request
                            through the static <b>HttpContext.Current</b> object.
                        </td>
                    </tr>
                </table>
            </div>
        </div>

        <div class="panel panel-primary">
            <div class="panel-heading">Handling Property Exceptions</div>
            <div class="panel-body">
                <table class="table table-striped">
                    <caption id="httpapplicationclasstable">Table 03-11. The Member Defined by the HttpApplication Class</caption>
                    <tr>
                        <th>
                            Name
                        </th>
                        <th>
                            Description
                        </th>
                    </tr>
                    <tr>
                        <td>
                            Application
                        </td>
                        <td>
                            Maps to the <b>HttpContext.Applicatiion</b> property, which provides access to application-wide state data,
                            as described in <a href="#chapter10title">Chapter 10</a>.
                        </td>
                    </tr>
                    <tr>
                        <td>
                            CompleteRequest()
                        </td>
                        <td>
                            Abandons the life cycle for the current request and moves directly to the <b>LogRequest</b> event.
                            See <a href="#chapter06title">Chapter 06</a> for details.
                        </td>
                    </tr>
                    <tr>
                        <td>
                            Context
                        </td>
                        <td>
                            Returns the <b>HttpContext</b> object for the current request.
                        </td>
                    </tr>
                    <tr>
                        <td>
                            Init()
                        </td>
                        <td>
                            Called when the <b>Init</b> method has been called on each of the registered modules;
                            see <a href="#chapter4title">Chapter 04</a> for details of modules.
                        </td>
                    </tr>
                    <tr>
                        <td>
                            RegisterModule(type)
                        </td>
                        <td>
                            Static method that registers a new module, but throws an <b>HttpException</b> if the value is null.
                        </td>
                    </tr>
                    <tr>
                        <td>
                            Request
                        </td>
                        <td>
                            Returns the <b>HttpContext.Request</b> value, but throws an <b>HttpException</b> if the value
                            is null
                        </td>
                    </tr>
                    <tr>
                        <td>
                            Response
                        </td>
                        <td>
                            Returns the <b>HttpContext.Response</b> value, but throws an <b>HttpException</b> if the value is null.
                        </td>
                    </tr>
                    <tr>
                        <td>
                            Server
                        </td>
                        <td>
                            Maps to the <b>HttpContext.Server</b> property. See <a href="#chapter06title">Chapter 06</a>.
                        </td>
                    </tr>
                    <tr>
                        <td>
                            Session
                        </td>
                        <td>
                            Returns the <b>HttpContext.Session</b> value, but throws an <b>HttpException</b> if the value is null.
                            See <a href="#chapter10title">Chapter 10</a>.
                        </td>
                    </tr>
                </table>
            </div>

            <table class="table table-striped">
                <caption id="httprequestclasstable">Table03-12. The Descriptive Properties Defined by the HttpRequest Class</caption>
                <tr>
                    <th>Name</th>
                    <th>Description</th>
                </tr>
                <tr>
                    <td>AcceptTypes</td>
                    <td>Returns a string array containing the <abbr title="Multi-Purpose Internet Mail Extensions">MIME</abbr> types accepted by the browser.</td>
                </tr>
                <tr>
                    <td>Browser</td>
                    <td>
                        Returns an <b>HttpBrowserCapabilites</b> object that describes the capabilites of
                        the browser; see <a href="#chapter07title">Chapter 07</a> for more details.
                    </td>
                </tr>
                <tr>
                    <td>
                        ContentEncoding
                    </td>
                    <td>
                        Retuns a <b>System.Text.Encoding</b> object that represents the character set
                        used to encode the request data.
                    </td>
                </tr>
                <tr>
                    <td>
                        ContentLength
                    </td>
                    <td>
                        Returns the number of bytes of content in the request
                    </td>
                </tr>
                <tr>
                    <td>
                        ContentType
                    </td>
                    <td>
                        Returns the <abbr title="Multi-Purpose Internet Mail Extensions">MIME</abbr> type of the content included in the request.
                    </td>
                </tr>
                <tr>
                    <td>
                        CurrentExcutionFilePathExtension
                    </td>
                    <td>
                        Returns the file extension component of the requested URL.
                    </td>
                </tr>
                <tr>
                    <td>
                        Headers
                    </td>
                    <td>
                        Returns a collection containing the request headers.
                    </td>
                </tr>
                <tr>
                    <td>
                        HttpMethod
                    </td>
                    <td>
                        Returns the HTTP method used to make the request (GET, POST, and so on).
                    </td>
                </tr>
                <tr>
                    <td>
                        InputStream
                    </td>
                    <td>
                        Returns a stream that can be used to read the contents of the request.
                    </td>
                </tr>
                <tr>
                    <td>
                        IsLocal
                    </td>
                    <td>
                        Returns <i>true</i> when the request has originated from the local machine.
                    </td>
                </tr>
                <tr>
                    <td>
                        MapPath(path)
                    </td>
                    <td>
                        Translate a file name within the project to an absolute path. See <a href="#chapter11title">Chapter 11</a> for an example.
                    </td>
                </tr>
                <tr>
                    <td>
                        RawUrl
                    </td>
                    <td>
                        Returns the part of the URL that follows the hostname. In other words, for
                        http://apress.com:80/books/Default.aspx, this property would
                        return /book/Default.aspx.
                    </td>
                </tr>
                <tr>
                    <td>
                        RequestContext
                    </td>
                    <td>
                        Returns a <b>RequestContext</b> object that provides access to the routing information for a request.
                        I demostrate the use of the <b>RequestContext</b> object in <a href="#chapter06title">Chapter 06</a>.
                    </td>
                </tr>
                <tr>
                    <td>
                        Url
                    </td>
                    <td>
                        Returns the request URL as a <b>System.Uri</b> object
                    </td>
                </tr>
                <tr>
                    <td>
                        UrlReferrer
                    </td>
                    <td>
                        Returns the referrer URL as a <b>System.Uri</b> object.
                    </td>
                </tr>
                <tr>
                    <td>
                        UserAgent
                    </td>
                    <td>
                        Returns the user-agent string supplied by the browser
                    </td>
                </tr>
                <tr>
                    <td>
                        UserHostAddress
                    </td>
                    <td>
                        Returns the IP address of the remote client, expressed as a string.
                    </td>
                </tr>
                <tr>
                    <td>
                        UserHostName
                    </td>
                    <td>
                        Returns the DNS name of the remote client
                    </td>
                </tr>
                <tr>
                    <td>
                        UserLanguages
                    </td>
                    <td>
                        Returns a string array of the languages preferred by the browswer/user.
                    </td>
                </tr>
                <tr>
                    <td>
                        Files
                    </td>
                    <td>
                        Returns a collection of files sent by the browser in a form
                    </td>
                </tr>
                <tr>
                    <td>
                        Form
                    </td>
                    <td>
                        Provide access to the raw form data.
                    </td>
                </tr>
                <tr>
                    <td>
                        Params
                    </td>
                    <td>
                        A collection of the combined data items from the query string, form fields, and cookies.
                        You can also use an array-style indexer directly on the <b>HttpRequest</b> object, such
                        that <b>Request["myname"]</b> is the same as <b>Request.Params["myname"]</b>.
                    </td>
                </tr>
                <tr>
                    <td>
                        QueryString
                    </td>
                    <td>
                        Returns a collection of the query string parameters; this property isn't usually used
                        directly in MVC applications.
                    </td>
                </tr>
            </table>
        </div>

        <div class="panel panel-primary">
            <div class="panel-heading">
                Working with HttpResponse Objects
            </div>
            <div class="panel-body">
                <table class="table table-condensed table-striped">
                    <caption id="httpresposnseclasstable">Table 03-15. The Most Useful Members of the HttpResponse Class</caption>
                    <tr>
                        <th>
                            Name
                        </th>
                        <th>
                            Description
                        </th>
                    </tr>
                    <tr>
                        <td>
                            AppendHeader(name, val)
                        </td>
                        <td>
                            Convenience method to add a new header to the response
                        </td>
                    </tr>
                    <tr>
                        <td>
                            BufferOutput
                        </td>
                        <td>
                            Gets or sets a value indicating whether the request should be buffered completely
                            before it is sent to the browser. The default value it <i>true</i>. Changing this to
                            <i>false</i> will prevent subsequent modules and handlers from being able to alter the response.
                        </td>
                    </tr>
                    <tr>
                        <td>Cache</td>
                        <td>
                            Returns an <b>HttpCachePolicy</b> object that specifies the caching policy for the response.
                            I describe the ASP.NET caching services in <a href="#chapter11title">Chapter 11</a> and
                            <a href="#chapter12title">Chapter 12</a>.
                        </td>
                    </tr>
                    <tr>
                        <td>
                            CacheControl
                        </td>
                        <td>
                            Gets or set the cache-control HTTP header for the response
                        </td>
                    </tr>
                    <tr>
                        <td>
                            Charset
                        </td>
                        <td>
                            Gets or sets the character set specified for the response.
                        </td>
                    </tr>
                    <tr>
                        <td>
                            Clear()
                        </td>
                        <td>
                            The <b>Clear</b> and <b>ClearContent</b> methods are equivalent, and they remove any content from the response
                        </td>
                    </tr>
                    <tr>
                        <td>
                            ClearHeaders()
                        </td>
                        <td>
                            Removes all of the headers from the response.
                        </td>
                    </tr>
                    <tr>
                        <td>
                            ContentEncoding
                        </td>
                        <td>
                            Gets or sets the encoding used for content in the response
                        </td>
                    </tr>
                    <tr>
                        <td>Headers</td>
                        <td>Returns the collection of headers for the response.</td>
                    </tr>
                    <tr>
                        <td>
                            IsClientConnected
                        </td>
                        <td>
                            Returns <i>true</i> is the client is still connected to the server.
                        </td>
                    </tr>
                    <tr>
                        <td>
                            IsRequestBeingDirected
                        </td>
                        <td>
                            Returns <i>true</i> if the browser will be sent a redirection.
                        </td>
                    </tr>
                    <tr>
                        <td>Output</td>
                        <td>
                            Returns a <b>TextWriter</b> that can be used to write text to the reponse.
                        </td>
                    </tr>
                    <tr>
                        <td>
                            OutputStream
                        </td>
                        <td>
                            Returns a <b>Stream</b> that can be used to write binary data to the response.
                        </td>
                    </tr>
                    <tr>
                        <td>
                            RedirectLocation
                        </td>
                        <td>
                            Gets or sets the value of the HTTP Location header
                        </td>
                    </tr>
                    <tr>
                        <td>Status</td>
                        <td>
                            Gets or sets the status for the response; the default 200 (OK).
                        </td>
                    </tr>
                    <tr>
                        <td>
                            StatusCode
                        </td>
                        <td>
                            Gets or sets the numeric part of the status; the default is 200.
                        </td>
                    </tr>
                    <tr>
                        <td>
                            StatusDescription
                        </td>
                        <td>
                            Gets or sets the text part of the status; the default is (OK).
                        </td>
                    </tr>
                    <tr>
                        <td>
                            SuppressContent
                        </td>
                        <td>
                            When set to <i>true</i>, this property prevents the response content from being sent to the client.
                        </td>
                    </tr>
                    <tr>
                        <td>
                            Write(data)
                        </td>
                        <td>
                            Writes data to the response output stream.
                        </td>
                    </tr>
                    <tr>
                        <td>
                            WriteFile(path)
                        </td>
                        <td>
                            Writes the contents of the specified file to the output stream.
                        </td>
                    </tr>
                </table>



                <table class="table table-condensed table-primary">
                    <caption>Table 03-16. Obtaining an HttpResponse Object in Different ASP.NET/MVC Components</caption>
                    <tr>
                        <th>
                            Component
                        </th>
                        <th>
                            Technique
                        </th>
                    </tr>
                    <tr>
                        <td>
                            Controller
                        </td>
                        <td>
                            User the <b>Response</b> convenience property.
                        </td>
                    </tr>
                    <tr>
                        <td>
                            View
                        </td>
                        <td>
                            Use the <b>Response</b> convenience property.
                        </td>
                    </tr>
                    <tr>
                        <td>
                            Global Application Class
                        </td>
                        <td>
                            Use the <b>Response</b> convenience property.
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <a href="chapter04title">Module</a>
                        </td>
                        <td>
                            No convenience property is available. Use the <b>HttpContext.Response</b> property.
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <a href="chapter05title">Handler</a>
                        </td>
                        <td>
                            No convenience property is available. Use the <b>HttpContext.Response</b> property.
                        </td>
                    </tr>
                    <tr>
                        <td>
                            Universally
                        </td>
                        <td>
                            You can always get the current <b>HttpResponse</b> object
                            through the static <b>HttpContext.Current.Response</b> property.
                        </td>
                    </tr>
                </table>
            </div>
        </div>



        <!-- Chapter 04, Modules -->
        <h3 id="chapter04title">Chapter 04, Modules</h3>
        <img src="ProASPNETMVC5Platform/Figure05-02TheRelationshipBetweenModuleServicesandMVCFrameworkControllers.jpg" />
        <p>
            Modules are classes that handle life-cycle events to monitor or manipulate requests or responses.
            Modules can also provide services to <a href="#chapter05title">handlers</a>.
        </p>
        <div class="panel panel-primary">
            <div class="panel-heading"> Understanding the Built-in Modules</div>

            <div class="panel-body">
                <table class="table table-condensed table-striped">
                    <caption>Table 04-07. The Modules in an ASP.NET Framework Application </caption>
                    <tr>
                        <th>
                            Name
                        </th>
                        <th>
                            Type
                        </th>
                    </tr>
                    <tr>
                        <td>
                            AnonymousIdentification
                        </td>
                        <td>
                            This module is implemeted by the <b>System.Web.Security.AnonymousIdentificationModule</b> class and is
                            responsible for uniquely identifying requests so that features such as user data can be used even when the
                            user has not been authenticated.
                        </td>
                    </tr>
                    <tr>
                        <td>
                            DefaultAuthentication
                        </td>
                        <td>
                            This module is implemented by the <b>System.Web.Security.DefaultAuthenticationModule</b> class and is responsible for ensuring that the
                            <b>User</b> property of the <b>HttpContext</b> object is set to an object that implements the <b>IPrincipal</b> interface if this has not been
                            done by one of the other authentication modules. See <a href="#">Part3</a> for details of authentication.
                        </td>
                    </tr>
                    <tr>
                        <td>
                            FormsAuthentication
                        </td>
                        <td>
                            This module is implemented by the <b>System.Web.Security.FormsAuthenticationModule</b> class and sets the value of the
                            <b>HttpContext.User</b> property when forms authentication is used. I explain authentication in <a href="#part3">Part3</a>.
                        </td>
                    </tr>
                    <tr>
                        <td>
                            CommonModules.InfoModule
                        </td>
                        <td>
                            This is one of the example modules I created earlier in the chapter
                        </td>
                    </tr>
                    <tr>
                        <td>
                            OutputCache
                        </td>
                        <td>
                            This module is implemented by the <b>System.Web.Caching.OutputCacheModule</b> class and is responsible for
                            caching responses sent to the browser. I explain how the ASP.NET framework caching features work in
                            <a href="#chapter11title">Chapter 11</a> and <a href="#chapter12title">Chapter 12</a>.
                        </td>
                    </tr>
                    <tr>
                        <td>
                            PageInspectorHttpModule
                        </td>
                        <td>
                            This module supports the Visual Studio Page Inspector feature,
                            which allows for HTML and CSS content to be debugged within Visual Studio.
                            I don’t describe this feature and find that the developer tools in modern web browsers are more useful.
                        </td>
                    </tr>
                    <tr>
                        <td>
                            Profile
                        </td>
                        <td>
                            This module is implemented by the <b>System.Web.Profile.ProfileModule</b> class and is responsible for
                            associating user profile data with a request. See Part 3 for details of authentication.
                            (This module supports the obsolete Membership API.)
                        </td>
                    </tr>
                    <tr>
                        <td>
                            RoleManager
                        </td>
                        <td>
                            This module is implemented by the <b>System.Web.Security.RoleManagerModule</b> class and
                            is responsible for assigning details of the roles that a user has been assigned to a request.
                            (This module supports the obsolete Membership API.)
                        </td>
                    </tr>
                    <tr>
                        <td>
                            ScriptModule-4.0
                        </td>
                        <td>
                            This module is implemented by the <b>System.Web.Handlers.ScriptModule</b> class and is responsible for supporting Ajax requests.
                            This module has been outmoded by support for Ajax requests in the MVC framework and, more recently the Web API.
                        </td>
                    </tr>
                    <tr>
                        <td>
                            ServiceModel-4.0
                        </td>
                        <td>
                            This module is implemented by the <b>System.ServiceModel.Activation.ServiceHttpModule</b> class.
                            This module is used to activate ASP.NET web services, which have been outmoded by the MVC framework and the Web API.
                        </td>
                    </tr>
                    <tr>
                        <td>
                            Session
                        </td>
                        <td>
                            This module is implemented by the <b>System.Web.SessionState.SessionStateModule</b> class
                            and is responsible for associating session data with a request. See <a href="#chapter10title">Chapter 10</a> for details of using session data.
                        </td>
                    </tr>
                    <tr>
                        <td>
                            Timer
                        </td>
                        <td>
                            This is the <b>TimerModule</b> class that I created earlier in the chapter.
                        </td>
                    </tr>
                    <tr>
                        <td>
                            Total
                        </td>
                        <td>
                            This is the <b>TotalTimeModule</b> class that I created earlier in the chapter.
                        </td>
                    </tr>
                    <tr>
                        <td>
                            UrlAuthorization
                        </td>
                        <td>
                            This module is implemented by the <b>System.Web.Security.UrlAuthorizationModule</b> class
                            and ensures that users are authorized to access the URLs they request.
                        </td>
                    </tr>
                    <tr>
                        <td>
                            UrlMappingModule
                        </td>
                        <td>
                            This module is implemented by the <b>System.Web.UrlMappingsModule</b> class
                            and is responsible for implementing the URL Mappings feature, which is not used in MVC framework applications.
                        </td>
                    </tr>
                    <tr>
                        <td>
                            UrlRoutingModule-4.0
                        </td>
                        <td>
                            This module is implemented by the <b>System.Web.Routing.UrlRoutingModule</b> class
                            and is responsible for implementing the URL routing feature.
                        </td>
                    </tr>
                    <tr>
                        <td>
                            WebPageHttpModule
                        </td>
                        <td>
                            This module intercepts requests for MVC framework view files and displays an error
                            when they are asked for (for example with a URL for /Views/Home/Index. cshtml).
                            Views can be rendered only as a result of a URL that targets an action method in a controller.
                        </td>
                    </tr>
                    <tr>
                        <td>WindowsAuthentication</td>
                        <td>
                            This module is implemented by the <b>System.Web.Security.WindowsAuthenticationModule</b> class
                            and is responsible for setting the value of the <b>HttpContext.User</b> property
                            when Windows authentication is used.
                            I don’t describe Windows authentication in this book because it is no longer widely used.
                        </td>
                    </tr>
                </table>

                <table class="table table-condensed table-striped">
                    <caption> Table 04-08. The Built-in Modules That Define Events</caption>
                    <tr>
                        <th>
                            Module
                        </th>
                        <th>
                            Description
                        </th>
                    </tr>
                    <tr>
                        <td>
                            AnonymousIdentification
                        </td>
                        <td>
                            Defines the event <b>Creating</b>, which provides an opportunity to override the identification.
                            The <b>Creating</b> event sends an instance of the <b>AnonymousIdentificationEventArgs</b> class to event handlers.
                        </td>
                    </tr>
                    <tr>
                        <td>
                            DefaultAuthentication
                        </td>
                        <td>
                            This module defines the <b>Authenticate</b> event that is triggered when the module sets the <b>User</b> property
                            and that sends an instance of the <b>DefaultAuthenticationEventArgs</b> class to event handlers
                        </td>
                    </tr>
                    <tr>
                        <td>
                            FormsAuthentication
                        </td>
                        <td>
                            This module defines the <b>Authenticate</b> event that lets you override the value of the <b>User</b> property.
                            Event handlers are sent a <b>FormsAuthenticationEventArgs</b> object
                        </td>
                    </tr>
                    <tr>
                        <td>
                            Profile
                        </td>
                        <td>
                            The <b>MigrateAnonymous</b> event is triggered when an anonymous user logs in and sends a <b>ProfileMigrateEventArgs</b> object to handlers.
                            The Personalize event is triggered when the profile data is being associated with the request and provides an opportunity to override the data
                            that is used (handlers are sent a <b>ProfileEventArgs</b> object).
                        </td>
                    </tr>
                    <tr>
                        <td>
                            RoleManager
                        </td>
                        <td>
                            This module defines the <b>GetRoles</b> event that allows you to override the role information associated with a request.
                            Event handlers are sent a <b>RoleManagerEventArgs</b> object.
                        </td>
                    </tr>
                    <tr>
                        <td>Session</td>
                        <td>
                            The <b>Start</b> event is triggered when a new session is started, and the <b>End</b> event is triggered when an event expires.
                            Both events sent standard EventArgs objects to handlers.
                        </td>
                    </tr>
                </table>
            </div>
        </div>


        <h3 id="chapter05title">Chapter 05, Handlers</h3>
        <img src="ProASPNETMVC5Platform/Figure05-03HandlersintheRequestLifeCycle.jpg" />
        <p>
            Handlers are the ASP.NET request handling component that is responsible for generating
            the response content for requests.
        </p>
        <p>
            There are multiple modules for each request but only one handler.<br />
            The modules are created as soon as the request life cycle begins, but the selection and creation
            of the handler are built right into the life cycle.
        </p>
        <img src="ProASPNETMVC5Platform/Figure05-04RelationshipBetweenLifeCycleEventsModuleandHandlers.jpg" />
        <p>
            Modules can also override the handler selection process, as described in <a href="#chapter06title">Chapter 06</a>.
        </p>

        <div class="panel panel-primary">
            <div class="panel-heading">
                Understanding Handlers in the Request Life Cycle
            </div>
            <div class="panel-body">
                <table class="table table-condensed table-striped">
                    <caption>Table 05-03. The Members Defined by the IHttpHandler Interface</caption>
                    <tr>
                        <th>
                            Name
                        </th>
                        <th>
                            Description
                        </th>
                    </tr>
                    <tr>
                        <td>
                            ProcessRequest(context)
                        </td>
                        <td>
                            This method is called when the ASP.NET framework wants the handler to generate
                            a response for a request. The Parameter is an <b>HttpContext</b> object, which provides
                            access to details of the request.
                        </td>
                    </tr>
                    <tr>
                        <td>
                            IsReusable
                        </td>
                        <td>
                            This property tells the ASP.NET framework whether the handler can be used to handle
                            further requests. If the property returns <i>false</i>, then the ASP.NET framework will
                            create new instances for each request. In most situations, returning a value of <i>true</i>
                            doesn't mean that handlers will be reused unless you implement a custom handler factory,
                            which I describe in the "Custom Handler Factories" section of this chapter.
                        </td>
                    </tr>



                </table>
            </div>
        </div>
        <div class="panel-group" id="parenttable0504">
            <div class="panel panel-default">
                <div class="panel-heading">
                    <h4 class="panel-title">
                        <a data-toggle="collapse" data-parent="#parenttable0504" href="#table0504">
                            Handlers and the Life-Cycle Events
                        </a>
                    </h4>
                </div>
                <div class="panel-collapse collapse in" id="table0504">
                    <div class="panel-body">
                        <table class="table table-condensed table-hover">
                            <caption>Table 05-04. The Request Life-Cycle Events Relevant to Handlers</caption>
                            <tr>
                                <th>
                                    Name
                                </th>
                                <th>
                                    Description
                                </th>
                            </tr>
                            <tr>
                                <td>
                                    MapRequestHandler <br />
                                    PostMapRequestHandler
                                </td>
                                <td>
                                    <b>MapRequestHandler</b> is triggered when the ASP.NET framework wants to locate
                                    a handler for the request. A new instance of the handler will be created unless
                                    an existing instance declares it can be reused.<br /> The <b>PostMapRequestHandler</b>
                                    event is triggered once the handler has been selected.
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    PreRequestHandlerExecute <br /> PostRequestHandlerExecute
                                </td>
                                <td>
                                    These events are triggered immediately before and after the call to the
                                    handler <b>ProcessRequest</b> method.
                                </td>
                            </tr>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <div class="panel-group" id="parenttable0505">
            <div class="panel panel-default">
                <div class="panel-heading">
                    <h4 class="panel-title">
                        <a data-toggle="collapse" data-parent="#parenttable0505" href="#table0505">
                            Registering a Handler Using the Configuration File
                        </a>
                    </h4>
                </div>
            </div>
            <div class="panel-collapse collapse in" id="table0505">
                <div class="panel-body">
                    <table class="table table-condensed table-striped">
                        <caption>Table 05-05. The Attributes Defined by the handlers/add Attribute </caption>
                        <tr>
                            <th>
                                Name
                            </th>
                            <th>
                                Description
                            </th>
                        </tr>
                        <tr>
                            <td>
                                name
                            </td>
                            <td>
                                Defines a name that uniquely identifies the handler
                            </td>
                        </tr>
                        <tr>
                            <td>
                                path
                            </td>
                            <td>
                                Specifies the URL path for which the handler can process
                            </td>
                        </tr>
                        <tr>
                            <td>
                                verb
                            </td>
                            <td>
                                Specifies the HTTP method that the handler supports. You can specify that all methods are supported
                                by using an asterisk (*), specify that a single method is supported (GET), or use comma-separated values
                                for multiple methods ("GET,POST"). When using comma-separated values, <u>
                                    be sure not to use spaces between values
                                </u>.
                            </td>
                        </tr>
                        <tr>
                            <td>
                                type
                            </td>
                            <td>
                                Specifies the type of the IHttpHandler or IHttpHandlerFactory implementation class. (I describe the
                                IHttpHandlerFactory interface in the “Custom Handler Factories” section later in this chapter.)
                            </td>
                        </tr>
                    </table>
                </div>
            </div>
        </div>
        <p>
            <i>Handler factories</i> are the ASP.NET component responsible for creating instances of handlers to service requests.<br />
            <i>Custom handler factories</i> are responsible for providing instances of handler classes to the ASP.NET platform in order to
            generate content for requests.
        </p>

        <div class="panel-group" id="parenttable05070508">
            <div class="panel panel-default">
                <div class="panel-heading">
                    <h4 class="panel-title">
                        <a data-toggle="collapse" data-parent="#parenttable05070508" href="#table05070508">
                            Custom Handler Factories
                        </a>
                    </h4>
                </div>
            </div>
            <div class="panel-collapse collapse in" id="table05070508">
                <div class="panel-body">
                    <table class="table table-condensed table-striped">
                        <caption>Table 05-07. The Methods Defined by the IHttpHandlerFactory Interface </caption>
                        <tr>
                            <th>
                                Name
                            </th>
                            <th>
                                Description
                            </th>
                        </tr>
                        <tr>
                            <td>
                                GetHandler(context, verb, url, path)
                            </td>
                            <td>
                                Called when the ASP.NET framework requires a handler for a request that
                                matches the <b>Web.config</b> registration.
                            </td>
                        </tr>
                        <tr>
                            <td>
                                ReleaseHandler(handler)
                            </td>
                            <td>
                                Called after a request, providing the factory with the opportunity to reuse the handler.
                            </td>
                        </tr>
                    </table>
                    <table class="table table-condensed table-striped">
                        <caption>Table 05-08. The Parameters of the IHttpFactory.GetHandler Method</caption>
                        <tr>
                            <th>
                                Name
                            </th>
                            <th>
                                Description
                            </th>
                        </tr>
                        <tr>
                            <td>
                                context
                            </td>
                            <td>
                                An <b>HttpContext</b> object through which information about the request and the
                                state of the application can be obtained.
                            </td>
                        </tr>
                        <tr>
                            <td>
                                verb
                            </td>
                            <td>
                                A string containing the HTTP method used to make the request (GET, POST, and so on)
                            </td>
                        </tr>
                        <tr>
                            <td>
                                url
                            </td>
                            <td>
                                A string containing the requested URL.
                            </td>
                        </tr>
                        <tr>
                            <td>
                                path
                            </td>
                            <td>
                                A string that combines the directory to which the application has been deployed and the request URL.
                            </td>
                        </tr>
                    </table>
                </div>
            </div>



        </div>

        <h3 id="chapter06title">Chapter 06, Disrupting the Request Life Cycle</h3>
        <p>
            Module redirection is the process of intercepting requests and redirecting them in a module,
            rather than letting the request be handled by the MVC framework. <br />
            Why? Action methods that perform only redirection incur relatively high overheads that can
            be avoided by using a module.
        </p>

        <div class="panel-group" id="parenttable0603">
            <div class="panel panel-default">
                <div class="panel-heading">
                    <h4 class="panel-title">
                        <a data-toggle="collapse" data-parent="#parenttable0603" href="#table0603">
                            Simplying the Redirection Process
                        </a>
                    </h4>
                </div>
                <div class="panel-collapse collapse in" id="table0603">
                    <div class="panel-body">
                        <table class="table table-condensed table-hover">
                            <caption>Table 06-03. The Redirection Methods Defined by the HttpResponse Class</caption>
                            <tr>
                                <th>
                                    Name
                                </th>
                                <th>
                                    Description
                                </th>
                            </tr>
                            <tr>
                                <td>
                                    Redirect(url) <br /> Redirect(url, end)
                                </td>
                                <td>
                                    Sends a response with a 302 status code,
                                    directing the client to the specified URL.
                                    The second argument is a bool that, if <i>true</i>,
                                    immediately terminates the request handling process by
                                    calling <b>HttpApplication.CompleteRequest</b>
                                    (which I describe later in this chapter).
                                    The single-argument version is equivalent to setting the second parameter
                                    to <i>true</i>.
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    RedirectPermanent(url) <br /> RedirectPermanent(url, end)
                                </td>
                                <td>
                                    Like the <b>Redirect</b> method, but the response is sent with 301 status code.
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    RedirectToRoute(name)
                                </td>
                                <td>
                                    Sends a response with a 302 status code to a URL generated from a URL route.
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    RedirectToRoutePermanent(name)
                                </td>
                                <td>
                                    Sends a response with a 301 status code to a URL generates from a URL route.
                                </td>
                            </tr>
                        </table>
                        <table>
                            <caption>Table 06-04. The Properties Defined by the RequestContext Class</caption>
                            <tr>
                                <th>
                                    Name
                                </th>
                                <th>
                                    Description
                                </th>
                            </tr>
                            <tr>
                                <td>
                                    HttpContext
                                </td>
                                <td>
                                    Returns the <b>HttpContext</b> object for the current request. This isn’t useful in this scenario because the <b>HttpContext</b> is used to obtain the RequestContext object.
                                </td>
                    </div>
                </div>
            </div>
        </div>

        <div class="panel-group" id="parenttable0603">
            <div class="panel panel-default">
                <div class="panel-heading">
                    <h4 class="panel-title">
                    <a data-toggle="collapse" data-parent="#parenttable0603" href="#table0603">
                        Symplifying the Redirection Process
                    </a>
                </h4>
            </div>
            <div class="panel-collapse collapse in" id="table0603">
                <div class="panel-body">
                    <table class="table table-condensed table-hover">
                        <tr>
                            <th>
                                Name
                            </th>
                            <th>
                                Description
                            </th>
                        </tr>
                        <tr>
                            <td>
                                Redirect(url) <br/> 


    </div>



    <!--@* the back-to-top floating button *@-->
    <img src="../images/BackTop02.jpg" class="backtop" alt="backtotop" />
    <script type="text/javascript">
        $(window).scroll(function () {
            if ($(window).scrollTop() >= 100) {
                $(".backtop").fadeIn();
            } else {
                $(".backtop").fadeOut();
            }
        });
        $(".backtop").click(function (event) {
            $('html, body').animate({ scrollTop: 0 }, 500);
            return false;
        });
    </script>



    <div class="bdsharebuttonbox">
        <a href="#" class="bds_more" data-cmd="more"></a>
        <a href="#" class="bds_qzone" data-cmd="qzone"></a>
        <a href="#" class="bds_tsina" data-cmd="tsina"></a>
        <a href="#" class="bds_tqq" data-cmd="tqq"></a>
        <a href="#" class="bds_renren" data-cmd="renren"></a>
        <a href="#" class="bds_weixin" data-cmd="weixin"></a>
    </div>
    <script>
        window._bd_share_config=.{"common":{"bdSnsKey":{},"bdText":"","bdMini":"2","bdPic":"","bdStyle":"0","bdSize":"16"},"share":{},"image":{"viewList":["qzone","tsina","tqq","renren","weixin"],"viewText":"分享到：","viewSize":"16"},"selectShare":{"bdContainerClass":null,"bdSelectMiniList":["qzone","tsina","tqq","renren","weixin"]}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];
    </script>


</body>
</html>
